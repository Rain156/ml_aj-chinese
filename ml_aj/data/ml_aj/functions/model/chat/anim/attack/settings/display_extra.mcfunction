## function ml_aj:model/chat/anim/attack/settings/display_final
## player context
## "id": The model's UUID string
## "index": The index number
## "name": The animation name
## "distance": The distance float amount
## "dist_int": The distance integer amount
## "dir": If directional
## "full": The full animation time
## "impact": The impact amount
## "impact_text": The impact text
## "suggest": The callback suggest
## "cmd_time": The command timing
## "cmd_entity": The command entity
## "projectile": The projectile type
## "proj_suggest": The suggest for projectile nbt
## "damage": The damage amount
## "damage": The damage text to display

function ml_aj:system/player/chat_clear

$tellraw @p [{"text":"","color":"#C29C54"},{"text":"---------------- 攻击动画设置 -----------------\n\n"},{"text":" 名称: ","hoverEvent":{"action":"show_text","contents":"攻击动画的名称"},"clickEvent":{"action":"suggest_command","value":"/function ml_aj:edit/attacks {i:$(index),name:\"$(name)\"}"}},{"text":" $(name) ","color":"gold","hoverEvent":{"action":"show_text","contents":"左键单击可编辑攻击动画名称\n(设置命令会出现在聊天栏里,只需编辑引号之间的值,然后按下回车即可)"},"clickEvent":{"action":"suggest_command","value":"/function ml_aj:edit/attacks {i:$(index),name:\"$(name)\"}"}},{"text":"\n\n"},{"text":" 朝向性: ","hoverEvent":{"action":"show_text","contents":"若攻击具有朝向性,则生物必须面朝距离范围内将被攻击的玩家"}},{"text":" [$(dir)] ","color":"green","hoverEvent":{"action":"show_text","contents":"单击切换"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_dir {index:$(index),id:\"$(id)\",dir:\"$(dir)\"}"}},{"text":"\n"},{"text":" 攻击伤害:   ","hoverEvent":{"action":"show_text","contents":"此次攻击将对玩家造成的伤害值\n(若值设为-1,则使用模型AI菜单中的伤害值\n弹射物伤害并不适用此值)"}},{"text":" \u25bc ","color":"green","hoverEvent":{"action":"show_text","contents":"降低攻击伤害值"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_damage {index:$(index),id:\"$(id)\",damage:$(damage),action:0}"}},{"text":"$(damage_text)","color":"yellow"},{"text":" \u25b2 ","color":"green","hoverEvent":{"action":"show_text","contents":"增加攻击伤害值"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_damage {index:$(index),id:\"$(id)\",damage:$(damage),action:1}"}},{"text":"\n"},{"text":" 范围:       ","hoverEvent":{"action":"show_text","contents":"玩家必须在多少(设置值)范围内,生物才会使用此攻击动画"}},{"text":" \u25bc ","color":"green","hoverEvent":{"action":"show_text","contents":"减少攻击范围"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_distance {index:$(index),id:\"$(id)\",distance:$(dist_int),action:0}"}},{"text":"$(distance) 格","color":"yellow"},{"text":" \u25b2 ","color":"green","hoverEvent":{"action":"show_text","contents":"增加攻击范围"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_distance {index:$(index),id:\"$(id)\",distance:$(dist_int),action:1}"}},{"text":"\n"},{"text":" 命中时机:   ","hoverEvent":{"action":"show_text","contents":"在攻击动画播放后,玩家将被击中的时机.\n(以动画时间的百分比衡量)"}},{"text":" \u25bc ","color":"green","hoverEvent":{"action":"show_text","contents":"减少命中时机"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_impact {index:$(index),id:\"$(id)\",action:0}"}},{"text":"$(impact_text)","color":"yellow"},{"text":" \u25b2 ","color":"green","hoverEvent":{"action":"show_text","contents":"增加命中时机"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_impact {index:$(index),id:\"$(id)\",action:1}"}},{"text":"\n"},{"text":" 攻击冷却:   ","hoverEvent":{"action":"show_text","contents":"此次攻击后,生物再次发动攻击前的等待时间"}},{"text":" \u25bc ","color":"green","hoverEvent":{"action":"show_text","contents":"减少攻击冷却时间"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_cooldown {index:$(index),id:\"$(id)\",action:0}"}},{"text":"$(cooldown) 秒","color":"yellow"},{"text":" \u25b2 ","color":"green","hoverEvent":{"action":"show_text","contents":"增加攻击冷却时间"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_cooldown {index:$(index),id:\"$(id)\",action:1}"}},{"text":"\n"},{"text":" 弹射物伤害: ","hoverEvent":{"action":"show_text","contents":"攻击是否应向目标发射弹射物\n(注意: 攻击伤害值并不适用于此值)"}},{"text":" [$(projectile)] ","color":"dark_aqua","hoverEvent":{"action":"show_text","contents":"单击以选择弹射物类型"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/projectile {index:$(index),id:\"$(id)\"}"}},{"storage":"ml_aj:logic","nbt":"data.player.temp.proj_speed","interpret":true}]

$execute unless data storage ml_aj:logic {data:{player:{temp:{projectile:"None"}}}} run tellraw @s [{"text":"","color":"#C29C54","hoverEvent":{"action":"show_text","contents":"单击设置弹射物实体的NBT数据\n(设置命令会出现在聊天栏里,只需编辑引号之间的值,然后按下回车即可)"},"clickEvent":{"action":"suggest_command","value":"/function ml_aj:edit/projectile {i:$(index),nbt:$(proj_suggest)}"}},{"text":"                "},{"text":"NBT: "},{"storage":"ml_aj:logic","nbt":"data.player.temp.proj_nbt"}]

$tellraw @s [{"text":"\n","color":"#C29C54"},{"text":" 回调命令:    ","hoverEvent":{"action":"show_text","contents":"在攻击动画期间运行的命令"}},{"storage":"ml_aj:logic","nbt":"data.player.temp.command","color":"dark_green","hoverEvent":{"action":"show_text","contents":"单击设置回调命令\n(设置命令会出现在聊天栏里,只需编辑引号之间的值,然后按下回车即可)"},"clickEvent":{"action":"suggest_command","value":"/function ml_aj:edit/callback {i:$(index),cmd:'$(suggest)'}"}}]

$execute unless data storage ml_aj:logic {data:{player:{temp:{cmd_time:""}}}} run tellraw @s [{"text":"","color":"#C29C54"},{"text":" 回调时机:   ","hoverEvent":{"action":"show_text","contents":"设置回调命令将在何时运行\nFirst Frame = 动画开始时\nHit Time = 玩家被攻击时\nLast Frame = 动画结束时"}},{"text":" [$(cmd_time)] ","color":"green","hoverEvent":{"action":"show_text","contents":"单击切换"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_cmd_time {index:$(index),id:\"$(id)\",time:\"$(cmd_time)\"}"}}]

$execute unless data storage ml_aj:logic {data:{player:{temp:{cmd_entity:""}}}} run tellraw @s [{"text":"","color":"#C29C54"},{"text":" 回调实体:   ","hoverEvent":{"action":"show_text","contents":"命令将作为aj.rig_root模型执行,还是作为被攻击的实体执行.\n如果作为目标实体执行,aj.rig_root模型在命令执行期间将具有aj.rig_root_attacker标签."}},{"text":" [$(cmd_entity)] ","color":"green","hoverEvent":{"action":"show_text","contents":"单击切换"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/settings/edit_cmd_entity {index:$(index),id:\"$(id)\",entity:\"$(cmd_entity)\"}"}}]

$tellraw @s [{"text":"\n------------------------------------------\n\n","color":"#C29C54"},{"text":" [返回] ","color":"#DD743B","hoverEvent":{"action":"show_text","contents":"返回至攻击动画菜单"},"clickEvent":{"action":"run_command","value":"/function ml_aj:model/chat/anim/attack/display {id:\"$(id)\"}"}},{"text":"\n"}]
